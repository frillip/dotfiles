#!/bin/bash
if [ $# -eq 0 ]; then
    echo "Open files that contain given matches in \$EDITOR, selected by fzf"
    echo
    rg 2>&1 | sed "s+rg +rgfzf +g"
    exit 1
fi

# tty required, see GNU xargs man page
rg --color=always "$@" | fzf --multi --ansi | cut -d ':' -f 1 | exec xargs sh -c 'exec $0 "$@" </dev/tty' $EDITOR
